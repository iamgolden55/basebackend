# Generated by Django 5.0.1 on 2025-05-06 19:42

import django.db.models.deletion
import django.utils.timezone
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('api', '0005_vitalsign'),
    ]

    operations = [
        migrations.CreateModel(
            name='FamilyMedicalHistory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('relation_type', models.CharField(choices=[('parent', 'Parent'), ('sibling', 'Sibling'), ('child', 'Child'), ('grandparent', 'Grandparent'), ('aunt_uncle', 'Aunt/Uncle'), ('cousin', 'Cousin'), ('other', 'Other')], help_text='Relationship to the patient', max_length=20)),
                ('relation_detail', models.CharField(blank=True, help_text="Additional details about relationship (e.g., 'Maternal Grandmother')", max_length=100, null=True)),
                ('condition', models.CharField(help_text='Medical condition or disease', max_length=255)),
                ('condition_code', models.CharField(blank=True, help_text='ICD-10 code if available', max_length=20, null=True)),
                ('age_at_onset', models.IntegerField(blank=True, help_text='Age when condition was diagnosed', null=True)),
                ('status', models.CharField(choices=[('active', 'Active/Current'), ('managed', 'Managed/Controlled'), ('resolved', 'Resolved/Cured'), ('terminal', 'Terminal'), ('deceased', 'Deceased due to condition'), ('unknown', 'Unknown')], default='unknown', help_text='Current status of the condition', max_length=20)),
                ('severity', models.IntegerField(blank=True, help_text='Severity scale from 1-5, where 5 is most severe', null=True)),
                ('is_genetic', models.BooleanField(default=False, help_text='Whether condition has known genetic component')),
                ('is_hereditary', models.BooleanField(default=False, help_text='Whether condition is considered hereditary')),
                ('risk_factor', models.BooleanField(default=True, help_text='Whether this is a risk factor for patient')),
                ('notes', models.TextField(blank=True, help_text='Additional notes about family history', null=True)),
                ('reported_by', models.CharField(blank=True, help_text='Who provided this information', max_length=255, null=True)),
                ('reported_date', models.DateField(default=django.utils.timezone.now, help_text='When this information was reported')),
                ('verified', models.BooleanField(default=False, help_text='Whether this information has been verified')),
                ('medical_record', models.ForeignKey(help_text='Medical record this family history belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='family_medical_history', to='api.medicalrecord')),
            ],
            options={
                'verbose_name': 'Family Medical History',
                'verbose_name_plural': 'Family Medical Histories',
                'ordering': ['relation_type', 'condition'],
                'indexes': [models.Index(fields=['medical_record', 'condition'], name='api_familym_medical_c3ad0a_idx'), models.Index(fields=['relation_type'], name='api_familym_relatio_56e65d_idx'), models.Index(fields=['is_genetic'], name='api_familym_is_gene_e88675_idx'), models.Index(fields=['risk_factor'], name='api_familym_risk_fa_c2449a_idx')],
            },
        ),
        migrations.CreateModel(
            name='GeneticInformation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('test_name', models.CharField(help_text='Name of genetic test', max_length=255)),
                ('test_code', models.CharField(blank=True, help_text='Test code if applicable', max_length=50, null=True)),
                ('test_date', models.DateField(help_text='Date test was performed')),
                ('lab_name', models.CharField(blank=True, help_text='Laboratory that performed test', max_length=255, null=True)),
                ('test_type', models.CharField(choices=[('carrier', 'Carrier Screening'), ('diagnostic', 'Diagnostic Testing'), ('predictive', 'Predictive Testing'), ('pharmacogenomic', 'Pharmacogenomic Testing'), ('research', 'Research Testing'), ('other', 'Other')], help_text='Type of genetic test', max_length=20)),
                ('gene_variant', models.CharField(blank=True, help_text='Specific gene or variant tested', max_length=255, null=True)),
                ('result', models.CharField(choices=[('positive', 'Positive'), ('negative', 'Negative'), ('uncertain', 'Variant of Uncertain Significance'), ('inconclusive', 'Inconclusive'), ('pending', 'Pending')], help_text='Test result', max_length=20)),
                ('clinical_significance', models.TextField(blank=True, help_text='Clinical significance of the result', null=True)),
                ('health_implications', models.TextField(blank=True, help_text='Health implications of the result', null=True)),
                ('risk_percentage', models.DecimalField(blank=True, decimal_places=2, help_text='Risk percentage if applicable', max_digits=5, null=True)),
                ('counseling_provided', models.BooleanField(default=False, help_text='Whether genetic counseling was provided')),
                ('counselor_name', models.CharField(blank=True, help_text='Name of genetic counselor', max_length=255, null=True)),
                ('counseling_date', models.DateField(blank=True, help_text='Date counseling was provided', null=True)),
                ('counseling_notes', models.TextField(blank=True, help_text='Notes from genetic counseling', null=True)),
                ('family_history_relevant', models.BooleanField(default=False, help_text='Whether family history is relevant to results')),
                ('recommendations', models.TextField(blank=True, help_text='Recommendations based on test results', null=True)),
                ('follow_up_testing', models.TextField(blank=True, help_text='Recommended follow-up testing', null=True)),
                ('documentation', models.FileField(blank=True, help_text='Related documentation or full test results', null=True, upload_to='genetic_tests/')),
                ('medical_record', models.ForeignKey(help_text='Medical record this genetic information belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='genetic_information', to='api.medicalrecord')),
            ],
            options={
                'verbose_name': 'Genetic Information',
                'verbose_name_plural': 'Genetic Information',
                'ordering': ['-test_date'],
                'indexes': [models.Index(fields=['medical_record', 'test_type'], name='api_genetic_medical_4d8912_idx'), models.Index(fields=['test_date'], name='api_genetic_test_da_2722d9_idx'), models.Index(fields=['result'], name='api_genetic_result_37c2d1_idx'), models.Index(fields=['gene_variant'], name='api_genetic_gene_va_63c8c2_idx')],
            },
        ),
        migrations.CreateModel(
            name='Immunization',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('vaccine_name', models.CharField(help_text='Name of vaccine', max_length=255)),
                ('vaccine_code', models.CharField(blank=True, help_text='Vaccine code (e.g., CVX code)', max_length=50, null=True)),
                ('administration_date', models.DateField(help_text='Date vaccine was administered')),
                ('administered_by', models.CharField(blank=True, help_text='Name of provider who administered vaccine', max_length=255, null=True)),
                ('facility', models.CharField(blank=True, help_text='Facility where vaccine was administered', max_length=255, null=True)),
                ('dose_number', models.IntegerField(default=1, help_text='Dose number in series')),
                ('series_complete', models.BooleanField(default=False, help_text='Whether series is complete')),
                ('route', models.CharField(blank=True, help_text='Route of administration (e.g., IM, SC, oral)', max_length=50, null=True)),
                ('site', models.CharField(blank=True, help_text='Site of administration (e.g., left arm, right thigh)', max_length=50, null=True)),
                ('lot_number', models.CharField(blank=True, help_text='Vaccine lot number', max_length=50, null=True)),
                ('expiration_date', models.DateField(blank=True, help_text='Vaccine expiration date', null=True)),
                ('manufacturer', models.CharField(blank=True, help_text='Vaccine manufacturer', max_length=255, null=True)),
                ('next_dose_due', models.DateField(blank=True, help_text='Date next dose is due', null=True)),
                ('reaction', models.TextField(blank=True, help_text='Any reactions to the vaccine', null=True)),
                ('reason_given', models.TextField(blank=True, help_text='Reason for administering vaccine', null=True)),
                ('contraindications_reviewed', models.BooleanField(default=True, help_text='Whether contraindications were reviewed')),
                ('notes', models.TextField(blank=True, help_text='Additional notes', null=True)),
                ('medical_record', models.ForeignKey(help_text='Medical record this immunization belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='immunizations', to='api.medicalrecord')),
            ],
            options={
                'verbose_name': 'Immunization',
                'verbose_name_plural': 'Immunizations',
                'ordering': ['-administration_date', 'vaccine_name'],
                'indexes': [models.Index(fields=['medical_record', 'vaccine_name'], name='api_immuniz_medical_a84515_idx'), models.Index(fields=['administration_date'], name='api_immuniz_adminis_b272e4_idx'), models.Index(fields=['series_complete'], name='api_immuniz_series__067139_idx')],
            },
        ),
        migrations.CreateModel(
            name='SurgicalHistory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('procedure_name', models.CharField(help_text='Name of surgical procedure', max_length=255)),
                ('procedure_code', models.CharField(blank=True, help_text='Procedure code (e.g., CPT code)', max_length=50, null=True)),
                ('procedure_date', models.DateField(help_text='Date of the procedure')),
                ('facility', models.CharField(blank=True, help_text='Medical facility where procedure was performed', max_length=255, null=True)),
                ('surgeon', models.CharField(blank=True, help_text='Name of surgeon who performed the procedure', max_length=255, null=True)),
                ('surgeon_specialty', models.CharField(blank=True, help_text='Specialty of the surgeon', max_length=100, null=True)),
                ('category', models.CharField(choices=[('elective', 'Elective'), ('urgent', 'Urgent'), ('emergency', 'Emergency'), ('diagnostic', 'Diagnostic')], default='elective', help_text='Category of surgical procedure', max_length=20)),
                ('body_area', models.CharField(blank=True, help_text='Area of the body involved', max_length=100, null=True)),
                ('outcome', models.CharField(choices=[('successful', 'Successful'), ('complications', 'Completed with Complications'), ('aborted', 'Aborted'), ('converted', 'Converted to Different Procedure'), ('unknown', 'Outcome Unknown')], default='successful', help_text='Outcome of the procedure', max_length=20)),
                ('complications', models.TextField(blank=True, help_text='Description of any complications', null=True)),
                ('length_of_stay', models.IntegerField(blank=True, help_text='Length of hospital stay in days', null=True)),
                ('recovery_notes', models.TextField(blank=True, help_text='Notes on recovery process', null=True)),
                ('anesthesia_type', models.CharField(blank=True, help_text='Type of anesthesia used', max_length=100, null=True)),
                ('implant_device', models.CharField(blank=True, help_text='Implant or device information if applicable', max_length=255, null=True)),
                ('notes', models.TextField(blank=True, help_text='Additional notes about the procedure', null=True)),
                ('follow_up_needed', models.BooleanField(default=True, help_text='Whether follow-up care is needed')),
                ('follow_up_date', models.DateField(blank=True, help_text='Scheduled follow-up date', null=True)),
                ('medical_record', models.ForeignKey(help_text='Medical record this surgical history belongs to', on_delete=django.db.models.deletion.CASCADE, related_name='surgical_history', to='api.medicalrecord')),
            ],
            options={
                'verbose_name': 'Surgical History',
                'verbose_name_plural': 'Surgical Histories',
                'ordering': ['-procedure_date'],
                'indexes': [models.Index(fields=['medical_record', 'procedure_date'], name='api_surgica_medical_19563f_idx'), models.Index(fields=['procedure_name'], name='api_surgica_procedu_75441f_idx'), models.Index(fields=['category'], name='api_surgica_categor_f7c411_idx'), models.Index(fields=['outcome'], name='api_surgica_outcome_8d66e8_idx')],
            },
        ),
    ]
