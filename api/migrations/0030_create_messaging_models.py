# Generated by Django 5.0.1 on 2025-06-28 13:15

import django.core.validators
import django.db.models.deletion
import django.utils.timezone
import uuid
from decimal import Decimal
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('api', '0029_add_insurance_regulatory_models'),
    ]

    operations = [
        migrations.CreateModel(
            name='BillingSystem',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(help_text='Name of the billing system', max_length=200, unique=True)),
                ('vendor_name', models.CharField(help_text='Name of the vendor/company', max_length=200)),
                ('system_code', models.CharField(blank=True, help_text='Unique identifier code', max_length=20, unique=True)),
                ('version', models.CharField(blank=True, help_text='Current version of the system', max_length=50)),
                ('system_type', models.CharField(choices=[('comprehensive', 'Comprehensive Healthcare Billing'), ('insurance_focused', 'Insurance Claims Focused'), ('patient_billing', 'Patient Billing Focused'), ('revenue_cycle', 'Revenue Cycle Management'), ('clearinghouse', 'Claims Clearinghouse'), ('payment_processor', 'Payment Processor'), ('analytics', 'Billing Analytics Platform'), ('integration', 'Integration Platform'), ('specialty', 'Specialty Billing System'), ('government', 'Government Billing System'), ('other', 'Other System Type')], default='comprehensive', max_length=20)),
                ('deployment_type', models.CharField(choices=[('cloud', 'Cloud-Based (SaaS)'), ('on_premise', 'On-Premise'), ('hybrid', 'Hybrid Deployment'), ('hosted', 'Hosted Solution'), ('api_only', 'API-Only Service')], default='cloud', max_length=20)),
                ('integration_complexity', models.CharField(choices=[('simple', 'Simple Integration'), ('moderate', 'Moderate Complexity'), ('complex', 'Complex Integration'), ('enterprise', 'Enterprise Level'), ('custom', 'Custom Integration Required')], default='moderate', max_length=20)),
                ('vendor_website', models.URLField(blank=True, help_text="Vendor's official website")),
                ('vendor_headquarters', models.CharField(blank=True, help_text='Vendor headquarters location', max_length=200)),
                ('vendor_founded_year', models.PositiveIntegerField(blank=True, help_text='Year vendor was founded', null=True)),
                ('vendor_size', models.CharField(blank=True, choices=[('startup', 'Startup (< 50 employees)'), ('small', 'Small (50-200 employees)'), ('medium', 'Medium (200-1000 employees)'), ('large', 'Large (1000-5000 employees)'), ('enterprise', 'Enterprise (> 5000 employees)')], help_text='Size of vendor company', max_length=20)),
                ('supported_countries', models.JSONField(default=list, help_text='List of countries where system is supported')),
                ('supported_regions', models.JSONField(default=list, help_text='Specific regions or states supported')),
                ('primary_market', models.CharField(blank=True, help_text='Primary geographic market', max_length=100)),
                ('core_features', models.JSONField(default=list, help_text='Core features of the billing system')),
                ('supported_billing_types', models.JSONField(default=list, help_text='Types of billing supported (e.g., insurance, patient, government)')),
                ('supported_payment_methods', models.JSONField(default=list, help_text='Payment methods supported')),
                ('revenue_cycle_features', models.JSONField(default=list, help_text='Revenue cycle management features')),
                ('insurance_claim_processing', models.BooleanField(default=True, help_text='Whether system processes insurance claims')),
                ('supported_insurance_types', models.JSONField(default=list, help_text='Types of insurance supported')),
                ('claims_clearinghouse_partners', models.JSONField(default=list, help_text='Clearinghouse partners for claims submission')),
                ('electronic_claims_submission', models.BooleanField(default=True, help_text='Whether electronic claims submission is supported')),
                ('real_time_eligibility_verification', models.BooleanField(default=False, help_text='Whether real-time eligibility verification is available')),
                ('api_available', models.BooleanField(default=False, help_text='Whether API is available for integration')),
                ('api_documentation_url', models.URLField(blank=True, help_text='URL to API documentation')),
                ('api_version', models.CharField(blank=True, help_text='Current API version', max_length=20)),
                ('webhook_support', models.BooleanField(default=False, help_text='Whether webhooks are supported')),
                ('integration_methods', models.JSONField(default=list, help_text='Available integration methods (API, HL7, file transfer, etc.)')),
                ('data_formats_supported', models.JSONField(default=list, help_text='Supported data formats (JSON, XML, CSV, HL7, etc.)')),
                ('hl7_support', models.BooleanField(default=False, help_text='Whether HL7 messaging is supported')),
                ('fhir_support', models.BooleanField(default=False, help_text='Whether FHIR standard is supported')),
                ('hipaa_compliant', models.BooleanField(default=False, help_text='Whether system is HIPAA compliant')),
                ('sox_compliant', models.BooleanField(default=False, help_text='Whether system is SOX compliant')),
                ('pci_dss_compliant', models.BooleanField(default=False, help_text='Whether system is PCI DSS compliant')),
                ('gdpr_compliant', models.BooleanField(default=False, help_text='Whether system is GDPR compliant')),
                ('security_certifications', models.JSONField(default=list, help_text='List of security certifications')),
                ('data_encryption', models.BooleanField(default=True, help_text='Whether data encryption is implemented')),
                ('uptime_percentage', models.DecimalField(blank=True, decimal_places=2, help_text='System uptime percentage', max_digits=5, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('average_response_time_ms', models.PositiveIntegerField(blank=True, help_text='Average API response time in milliseconds', null=True)),
                ('transaction_volume_capacity', models.PositiveIntegerField(blank=True, help_text='Daily transaction volume capacity', null=True)),
                ('concurrent_user_capacity', models.PositiveIntegerField(blank=True, help_text='Maximum concurrent users supported', null=True)),
                ('pricing_model', models.CharField(blank=True, choices=[('subscription', 'Monthly/Annual Subscription'), ('per_transaction', 'Per Transaction'), ('per_user', 'Per User'), ('percentage', 'Percentage of Revenue'), ('flat_fee', 'Flat Fee'), ('tiered', 'Tiered Pricing'), ('custom', 'Custom Pricing'), ('freemium', 'Freemium Model')], help_text='Pricing model used by the system', max_length=50)),
                ('base_monthly_cost', models.DecimalField(blank=True, decimal_places=2, help_text='Base monthly cost', max_digits=10, null=True)),
                ('per_transaction_fee', models.DecimalField(blank=True, decimal_places=4, help_text='Fee per transaction', max_digits=8, null=True)),
                ('setup_fee', models.DecimalField(blank=True, decimal_places=2, help_text='One-time setup fee', max_digits=10, null=True)),
                ('currency', models.CharField(default='USD', help_text='Currency for pricing', max_length=3)),
                ('implementation_time_weeks', models.PositiveIntegerField(blank=True, help_text='Typical implementation time in weeks', null=True)),
                ('training_provided', models.BooleanField(default=True, help_text='Whether training is provided')),
                ('support_channels', models.JSONField(default=list, help_text='Available support channels (phone, email, chat, etc.)')),
                ('support_hours', models.CharField(blank=True, help_text='Support hours (e.g., 24/7, business hours)', max_length=100)),
                ('dedicated_account_manager', models.BooleanField(default=False, help_text='Whether dedicated account manager is provided')),
                ('total_customers', models.PositiveIntegerField(blank=True, help_text='Total number of customers', null=True)),
                ('healthcare_customers', models.PositiveIntegerField(blank=True, help_text='Number of healthcare customers', null=True)),
                ('customer_satisfaction_rating', models.DecimalField(blank=True, decimal_places=1, help_text='Customer satisfaction rating (1-10)', max_digits=3, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(10)])),
                ('customer_retention_rate', models.DecimalField(blank=True, decimal_places=2, help_text='Customer retention rate percentage', max_digits=5, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('certification_status', models.CharField(choices=[('certified', 'Certified'), ('pending', 'Certification Pending'), ('not_certified', 'Not Certified'), ('expired', 'Certification Expired'), ('revoked', 'Certification Revoked')], default='not_certified', max_length=20)),
                ('certification_body', models.CharField(blank=True, help_text='Certification body or authority', max_length=200)),
                ('certification_date', models.DateField(blank=True, help_text='Date of certification', null=True)),
                ('certification_expiry_date', models.DateField(blank=True, help_text='Certification expiry date', null=True)),
                ('audit_frequency', models.CharField(blank=True, choices=[('annual', 'Annual'), ('biannual', 'Bi-Annual'), ('quarterly', 'Quarterly'), ('on_demand', 'On Demand'), ('continuous', 'Continuous')], help_text='Frequency of compliance audits', max_length=20)),
                ('reporting_capabilities', models.JSONField(default=list, help_text='Available reporting capabilities')),
                ('analytics_features', models.JSONField(default=list, help_text='Analytics features available')),
                ('custom_reporting', models.BooleanField(default=False, help_text='Whether custom reporting is available')),
                ('real_time_dashboards', models.BooleanField(default=False, help_text='Whether real-time dashboards are available')),
                ('ehr_integrations', models.JSONField(default=list, help_text='EHR systems with direct integrations')),
                ('practice_management_integrations', models.JSONField(default=list, help_text='Practice management systems with integrations')),
                ('payment_processor_partnerships', models.JSONField(default=list, help_text='Payment processor partnerships')),
                ('marketplace_listings', models.JSONField(default=list, help_text='Marketplace listings (AWS, Azure, etc.)')),
                ('sales_contact_email', models.EmailField(blank=True, help_text='Sales contact email', max_length=254)),
                ('sales_contact_phone', models.CharField(blank=True, help_text='Sales contact phone', max_length=20)),
                ('support_contact_email', models.EmailField(blank=True, help_text='Support contact email', max_length=254)),
                ('support_contact_phone', models.CharField(blank=True, help_text='Support contact phone', max_length=20)),
                ('industry_rating', models.DecimalField(blank=True, decimal_places=1, help_text='Industry rating (1-10)', max_digits=3, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(10)])),
                ('ease_of_use_rating', models.DecimalField(blank=True, decimal_places=1, help_text='Ease of use rating (1-10)', max_digits=3, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(10)])),
                ('feature_completeness_rating', models.DecimalField(blank=True, decimal_places=1, help_text='Feature completeness rating (1-10)', max_digits=3, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(10)])),
                ('customer_reviews', models.JSONField(default=list, help_text='Customer reviews and testimonials')),
                ('main_competitors', models.JSONField(default=list, help_text='Main competitor systems')),
                ('competitive_advantages', models.TextField(blank=True, help_text='Key competitive advantages')),
                ('unique_features', models.JSONField(default=list, help_text='Unique features not found in competitors')),
                ('vendor_stability_risk', models.CharField(choices=[('low', 'Low Risk'), ('medium', 'Medium Risk'), ('high', 'High Risk'), ('critical', 'Critical Risk')], default='medium', help_text='Vendor stability risk assessment', max_length=10)),
                ('technology_risk', models.CharField(choices=[('low', 'Low Risk'), ('medium', 'Medium Risk'), ('high', 'High Risk'), ('critical', 'Critical Risk')], default='medium', help_text='Technology risk assessment', max_length=10)),
                ('security_risk', models.CharField(choices=[('low', 'Low Risk'), ('medium', 'Medium Risk'), ('high', 'High Risk'), ('critical', 'Critical Risk')], default='medium', help_text='Security risk assessment', max_length=10)),
                ('is_active', models.BooleanField(default=True, help_text='Whether billing system is currently active/available')),
                ('is_recommended', models.BooleanField(default=False, help_text='Whether this system is recommended by organization')),
                ('last_evaluated', models.DateField(blank=True, help_text='Date of last evaluation', null=True)),
                ('evaluation_source', models.CharField(blank=True, help_text='Source of last evaluation', max_length=200)),
                ('implementation_notes', models.TextField(blank=True, help_text='Notes about implementation considerations')),
                ('known_issues', models.TextField(blank=True, help_text='Known issues or limitations')),
                ('recent_updates', models.TextField(blank=True, help_text='Recent updates or changes to the system')),
                ('notes', models.TextField(blank=True, help_text='Additional notes about the billing system')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='created_billing_systems', to=settings.AUTH_USER_MODEL)),
                ('last_modified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='modified_billing_systems', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['name'],
                'permissions': [('can_manage_billing_systems', 'Can manage billing systems'), ('can_evaluate_billing_systems', 'Can evaluate billing systems'), ('can_view_billing_system_details', 'Can view billing system details')],
            },
        ),
        migrations.CreateModel(
            name='CertificationBody',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(help_text='Official name of the certification body', max_length=200, unique=True)),
                ('short_name', models.CharField(blank=True, help_text='Abbreviated name or acronym', max_length=50)),
                ('organization_code', models.CharField(blank=True, help_text='Unique identifier code', max_length=20, unique=True)),
                ('organization_type', models.CharField(choices=[('international', 'International Organization'), ('national', 'National Accreditation Body'), ('regional', 'Regional Certification Body'), ('professional', 'Professional Association'), ('government', 'Government Agency'), ('industry', 'Industry Association'), ('third_party', 'Third-Party Certifier')], default='professional', max_length=20)),
                ('certification_scope', models.CharField(choices=[('healthcare_general', 'General Healthcare'), ('hospital_accreditation', 'Hospital Accreditation'), ('quality_management', 'Quality Management Systems'), ('patient_safety', 'Patient Safety'), ('laboratory', 'Laboratory Services'), ('medical_devices', 'Medical Devices'), ('information_security', 'Information Security'), ('environmental', 'Environmental Management'), ('specialty_care', 'Specialty Care'), ('emergency_services', 'Emergency Services'), ('surgical_services', 'Surgical Services'), ('nursing_care', 'Nursing Care'), ('pharmacy', 'Pharmacy Services'), ('imaging', 'Medical Imaging'), ('other', 'Other Certification Scope')], default='healthcare_general', max_length=30)),
                ('recognition_level', models.CharField(choices=[('international', 'Internationally Recognized'), ('national', 'Nationally Recognized'), ('regional', 'Regionally Recognized'), ('industry', 'Industry Recognized'), ('local', 'Locally Recognized')], default='national', max_length=20)),
                ('headquarters_country', models.CharField(help_text='Country where organization is headquartered', max_length=100)),
                ('operating_countries', models.JSONField(default=list, help_text='List of countries where certifications are offered')),
                ('regional_offices', models.JSONField(default=list, help_text='List of regional office locations')),
                ('headquarters_address', models.TextField(help_text='Official headquarters address')),
                ('phone_number', models.CharField(blank=True, max_length=20)),
                ('email', models.EmailField(blank=True, help_text='Official contact email', max_length=254)),
                ('website', models.URLField(blank=True, help_text='Official website URL')),
                ('certification_programs', models.JSONField(default=list, help_text='List of certification programs offered')),
                ('accreditation_standards', models.JSONField(default=list, help_text='List of standards used for accreditation')),
                ('assessment_methodologies', models.TextField(blank=True, help_text='Description of assessment methodologies')),
                ('application_portal_url', models.URLField(blank=True, help_text='URL for certification applications')),
                ('application_processing_days', models.PositiveIntegerField(blank=True, help_text='Average days to process applications', null=True)),
                ('assessment_duration_days', models.PositiveIntegerField(blank=True, help_text='Typical duration of assessment process', null=True)),
                ('on_site_assessment_required', models.BooleanField(default=True, help_text='Whether on-site assessment is required')),
                ('certification_validity_years', models.PositiveIntegerField(blank=True, help_text='Number of years certification is valid', null=True)),
                ('renewal_assessment_required', models.BooleanField(default=True, help_text='Whether renewal requires reassessment')),
                ('surveillance_assessments', models.BooleanField(default=False, help_text='Whether regular surveillance assessments are conducted')),
                ('surveillance_frequency_months', models.PositiveIntegerField(blank=True, help_text='Frequency of surveillance assessments in months', null=True)),
                ('application_fee', models.DecimalField(blank=True, decimal_places=2, help_text='Application fee amount', max_digits=10, null=True)),
                ('assessment_fee', models.DecimalField(blank=True, decimal_places=2, help_text='Assessment fee amount', max_digits=10, null=True)),
                ('annual_maintenance_fee', models.DecimalField(blank=True, decimal_places=2, help_text='Annual maintenance fee', max_digits=10, null=True)),
                ('currency', models.CharField(default='USD', help_text='Currency for fees', max_length=3)),
                ('pass_rate_percentage', models.DecimalField(blank=True, decimal_places=2, help_text='Percentage of applicants who pass assessment', max_digits=5, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('average_assessment_score', models.DecimalField(blank=True, decimal_places=2, help_text='Average assessment score', max_digits=5, null=True)),
                ('customer_satisfaction_rating', models.DecimalField(blank=True, decimal_places=1, help_text='Customer satisfaction rating (1-10)', max_digits=3, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(10)])),
                ('industry_reputation_score', models.PositiveIntegerField(blank=True, help_text='Industry reputation score (1-10)', null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(10)])),
                ('years_in_operation', models.PositiveIntegerField(blank=True, help_text='Number of years in operation', null=True)),
                ('total_organizations_certified', models.PositiveIntegerField(blank=True, help_text='Total number of organizations certified', null=True)),
                ('has_online_portal', models.BooleanField(default=False, help_text='Whether online application portal is available')),
                ('supports_digital_assessment', models.BooleanField(default=False, help_text='Whether digital/remote assessments are supported')),
                ('provides_digital_certificates', models.BooleanField(default=False, help_text='Whether digital certificates are provided')),
                ('has_api_integration', models.BooleanField(default=False, help_text='Whether API integration is available')),
                ('primary_contact_name', models.CharField(blank=True, help_text='Primary contact person', max_length=100)),
                ('primary_contact_title', models.CharField(blank=True, help_text='Title of primary contact', max_length=100)),
                ('primary_contact_email', models.EmailField(blank=True, max_length=254)),
                ('primary_contact_phone', models.CharField(blank=True, max_length=20)),
                ('lead_assessor_name', models.CharField(blank=True, help_text='Lead assessor or director', max_length=100)),
                ('assessor_qualifications', models.TextField(blank=True, help_text='Required qualifications for assessors')),
                ('number_of_assessors', models.PositiveIntegerField(blank=True, help_text='Number of qualified assessors', null=True)),
                ('business_hours', models.TextField(blank=True, help_text='Business hours and time zones')),
                ('languages_supported', models.JSONField(default=list, help_text='Languages supported for assessments')),
                ('emergency_contact_available', models.BooleanField(default=False, help_text='Whether emergency contact is available')),
                ('is_accredited_by', models.TextField(blank=True, help_text='Organizations that accredit this certification body')),
                ('iso_17021_compliant', models.BooleanField(default=False, help_text='Whether compliant with ISO/IEC 17021')),
                ('government_recognized', models.BooleanField(default=False, help_text='Whether recognized by government authorities')),
                ('mutual_recognition_agreements', models.JSONField(default=list, help_text='List of mutual recognition agreements')),
                ('response_time_hours', models.PositiveIntegerField(blank=True, help_text='Typical response time for inquiries in hours', null=True)),
                ('assessment_completion_rate', models.DecimalField(blank=True, decimal_places=2, help_text='Percentage of assessments completed on time', max_digits=5, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('last_performance_review', models.DateField(blank=True, help_text='Date of last performance review', null=True)),
                ('is_active', models.BooleanField(default=True, help_text='Whether certification body is currently active')),
                ('last_verified', models.DateField(blank=True, help_text='Last time information was verified', null=True)),
                ('verification_source', models.CharField(blank=True, help_text='Source of last verification', max_length=200)),
                ('special_requirements', models.TextField(blank=True, help_text='Special requirements or prerequisites')),
                ('notable_achievements', models.TextField(blank=True, help_text='Notable achievements or recognitions')),
                ('recent_changes', models.TextField(blank=True, help_text='Recent changes to standards or processes')),
                ('notes', models.TextField(blank=True, help_text='Additional notes about the certification body')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='created_certification_bodies', to=settings.AUTH_USER_MODEL)),
                ('last_modified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='modified_certification_bodies', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name_plural': 'Certification Bodies',
                'ordering': ['name'],
                'permissions': [('can_manage_certification_bodies', 'Can manage certification bodies'), ('can_verify_certification_data', 'Can verify certification information'), ('can_view_performance_data', 'Can view performance metrics')],
            },
        ),
        migrations.CreateModel(
            name='ComplianceFramework',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(help_text='Official name of the compliance framework', max_length=200, unique=True)),
                ('short_name', models.CharField(blank=True, help_text='Abbreviated name or acronym', max_length=50)),
                ('framework_code', models.CharField(blank=True, help_text='Unique identifier code', max_length=20, unique=True)),
                ('framework_type', models.CharField(choices=[('privacy', 'Privacy and Data Protection'), ('security', 'Information Security'), ('quality', 'Quality Management'), ('safety', 'Patient Safety'), ('operational', 'Operational Standards'), ('financial', 'Financial Compliance'), ('regulatory', 'Regulatory Requirements'), ('environmental', 'Environmental Standards'), ('ethics', 'Ethics and Conduct'), ('risk', 'Risk Management'), ('governance', 'Corporate Governance'), ('other', 'Other Framework')], default='privacy', max_length=20)),
                ('scope_level', models.CharField(choices=[('international', 'International Standard'), ('regional', 'Regional Requirement'), ('national', 'National Law/Regulation'), ('state_provincial', 'State/Provincial Regulation'), ('local', 'Local Ordinance'), ('industry', 'Industry Standard'), ('organizational', 'Organizational Policy')], default='national', max_length=20)),
                ('compliance_complexity', models.CharField(choices=[('basic', 'Basic Requirements'), ('intermediate', 'Intermediate Complexity'), ('advanced', 'Advanced Framework'), ('expert', 'Expert Level Implementation'), ('enterprise', 'Enterprise Grade')], default='intermediate', max_length=20)),
                ('enforcement_level', models.CharField(choices=[('mandatory', 'Legally Mandatory'), ('recommended', 'Industry Recommended'), ('voluntary', 'Voluntary Adoption'), ('contractual', 'Contractual Requirement'), ('best_practice', 'Best Practice Standard')], default='mandatory', max_length=20)),
                ('applicable_countries', models.JSONField(default=list, help_text='List of countries where this framework applies')),
                ('applicable_regions', models.JSONField(default=list, help_text='Specific regions, states, or provinces')),
                ('governing_authority', models.CharField(help_text='Authority or organization that governs this framework', max_length=200)),
                ('regulatory_body', models.CharField(blank=True, help_text='Regulatory body responsible for enforcement', max_length=200)),
                ('description', models.TextField(help_text='Detailed description of the compliance framework')),
                ('purpose', models.TextField(blank=True, help_text='Primary purpose and objectives of the framework')),
                ('key_principles', models.JSONField(default=list, help_text='Key principles or pillars of the framework')),
                ('core_requirements', models.JSONField(default=list, help_text='Core compliance requirements')),
                ('implementation_guidelines', models.TextField(blank=True, help_text='Guidelines for implementing the framework')),
                ('required_policies', models.JSONField(default=list, help_text='Required policies and procedures')),
                ('mandatory_training_topics', models.JSONField(default=list, help_text='Mandatory training topics for staff')),
                ('required_documentation', models.JSONField(default=list, help_text='Required documentation and records')),
                ('audit_requirements', models.JSONField(default=list, help_text='Audit and assessment requirements')),
                ('reporting_obligations', models.JSONField(default=list, help_text='Reporting obligations and frequencies')),
                ('version', models.CharField(blank=True, help_text='Current version of the framework', max_length=20)),
                ('effective_date', models.DateField(blank=True, help_text='Date when framework became effective', null=True)),
                ('last_updated', models.DateField(blank=True, help_text='Last update to the framework', null=True)),
                ('next_review_date', models.DateField(blank=True, help_text='Next scheduled review date', null=True)),
                ('max_penalty_amount', models.DecimalField(blank=True, decimal_places=2, help_text='Maximum penalty amount for non-compliance', max_digits=15, null=True)),
                ('penalty_currency', models.CharField(default='USD', help_text='Currency for penalty amounts', max_length=3)),
                ('penalty_structure', models.TextField(blank=True, help_text='Structure of penalties for violations')),
                ('breach_notification_requirements', models.TextField(blank=True, help_text='Requirements for breach notification')),
                ('assessment_frequency_months', models.PositiveIntegerField(blank=True, help_text='Required frequency of compliance assessments', null=True)),
                ('external_audit_required', models.BooleanField(default=False, help_text='Whether external audits are required')),
                ('certification_available', models.BooleanField(default=False, help_text='Whether certification programs are available')),
                ('certification_bodies', models.JSONField(default=list, help_text='List of authorized certification bodies')),
                ('typical_implementation_months', models.PositiveIntegerField(blank=True, help_text='Typical time required for full implementation', null=True)),
                ('grace_period_months', models.PositiveIntegerField(blank=True, help_text='Grace period for new organizations', null=True)),
                ('phased_implementation', models.BooleanField(default=False, help_text='Whether implementation can be done in phases')),
                ('implementation_phases', models.JSONField(default=list, help_text='Description of implementation phases')),
                ('official_website', models.URLField(blank=True, help_text='Official website for the framework')),
                ('guidance_documents_url', models.URLField(blank=True, help_text='URL for guidance documents')),
                ('training_resources', models.JSONField(default=list, help_text='Available training resources and materials')),
                ('consultant_directory', models.URLField(blank=True, help_text='Directory of certified consultants')),
                ('required_technologies', models.JSONField(default=list, help_text='Required or recommended technologies')),
                ('compatible_software', models.JSONField(default=list, help_text='Compatible compliance software and tools')),
                ('api_integration_available', models.BooleanField(default=False, help_text='Whether API integration is available for compliance checking')),
                ('automated_monitoring_tools', models.JSONField(default=list, help_text='Available automated monitoring tools')),
                ('applicable_healthcare_sectors', models.JSONField(default=list, help_text='Healthcare sectors this framework applies to')),
                ('patient_data_requirements', models.TextField(blank=True, help_text='Specific requirements for patient data handling')),
                ('data_retention_requirements', models.TextField(blank=True, help_text='Data retention and disposal requirements')),
                ('cross_border_data_rules', models.TextField(blank=True, help_text='Rules for cross-border data transfers')),
                ('risk_categories', models.JSONField(default=list, help_text='Risk categories addressed by this framework')),
                ('impact_assessment_required', models.BooleanField(default=False, help_text='Whether formal impact assessments are required')),
                ('risk_mitigation_strategies', models.JSONField(default=list, help_text='Recommended risk mitigation strategies')),
                ('change_notification_process', models.TextField(blank=True, help_text='Process for notifying changes to the framework')),
                ('stakeholder_consultation', models.BooleanField(default=False, help_text='Whether stakeholder consultation is part of updates')),
                ('public_comment_period', models.BooleanField(default=False, help_text='Whether public comment periods are held')),
                ('related_frameworks', models.JSONField(default=list, help_text='Related or complementary frameworks')),
                ('conflicting_frameworks', models.JSONField(default=list, help_text='Frameworks that may conflict with this one')),
                ('harmonization_efforts', models.TextField(blank=True, help_text='Efforts to harmonize with other frameworks')),
                ('adoption_rate_percentage', models.DecimalField(blank=True, decimal_places=2, help_text='Percentage of eligible organizations that have adopted', max_digits=5, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('average_implementation_cost', models.DecimalField(blank=True, decimal_places=2, help_text='Average cost of implementation', max_digits=12, null=True)),
                ('cost_currency', models.CharField(default='USD', help_text='Currency for cost estimates', max_length=3)),
                ('effectiveness_rating', models.DecimalField(blank=True, decimal_places=1, help_text='Effectiveness rating (1-10)', max_digits=3, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(10)])),
                ('contact_email', models.EmailField(blank=True, help_text='Contact email for framework inquiries', max_length=254)),
                ('support_phone', models.CharField(blank=True, help_text='Support phone number', max_length=20)),
                ('help_desk_url', models.URLField(blank=True, help_text='Help desk or support portal URL')),
                ('is_active', models.BooleanField(default=True, help_text='Whether framework is currently active')),
                ('is_mandatory_for_hospitals', models.BooleanField(default=False, help_text='Whether this framework is mandatory for hospitals')),
                ('priority_level', models.CharField(choices=[('critical', 'Critical Priority'), ('high', 'High Priority'), ('medium', 'Medium Priority'), ('low', 'Low Priority')], default='medium', help_text='Priority level for implementation', max_length=10)),
                ('industry_best_practices', models.TextField(blank=True, help_text='Industry best practices related to this framework')),
                ('case_studies', models.JSONField(default=list, help_text='Links or references to implementation case studies')),
                ('success_metrics', models.JSONField(default=list, help_text='Metrics to measure successful implementation')),
                ('common_challenges', models.TextField(blank=True, help_text='Common challenges in implementing this framework')),
                ('notes', models.TextField(blank=True, help_text='Additional notes about the framework')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='created_compliance_frameworks', to=settings.AUTH_USER_MODEL)),
                ('last_modified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='modified_compliance_frameworks', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['priority_level', 'name'],
                'permissions': [('can_manage_compliance_frameworks', 'Can manage compliance frameworks'), ('can_view_framework_details', 'Can view framework details'), ('can_assess_compliance', 'Can assess compliance status')],
            },
        ),
        migrations.CreateModel(
            name='Conversation',
            fields=[
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('conversation_type', models.CharField(choices=[('direct', 'Direct Message'), ('group', 'Group Chat'), ('department', 'Department Channel'), ('emergency', 'Emergency Channel'), ('broadcast', 'Broadcast Channel')], default='direct', max_length=20)),
                ('title', models.CharField(blank=True, max_length=200, null=True)),
                ('description', models.TextField(blank=True, null=True)),
                ('avatar', models.ImageField(blank=True, null=True, upload_to='messaging/avatars/')),
                ('priority_level', models.CharField(choices=[('routine', 'Routine'), ('urgent', 'Urgent'), ('emergency', 'Emergency')], default='routine', max_length=20)),
                ('department', models.CharField(blank=True, max_length=100, null=True)),
                ('is_muted', models.BooleanField(default=False)),
                ('is_archived', models.BooleanField(default=False)),
                ('is_pinned', models.BooleanField(default=False)),
                ('is_encrypted', models.BooleanField(default=True)),
                ('retention_days', models.PositiveIntegerField(default=2555)),
                ('auto_delete_enabled', models.BooleanField(default=False)),
                ('last_message_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('last_activity_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_conversations', to=settings.AUTH_USER_MODEL)),
                ('hospital_context', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='conversations', to='api.hospital')),
            ],
            options={
                'db_table': 'messaging_conversation',
                'ordering': ['-last_message_at', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='HospitalBillingIntegration',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('integration_name', models.CharField(help_text='Custom name for this integration', max_length=200)),
                ('integration_type', models.CharField(choices=[('primary', 'Primary Billing System'), ('secondary', 'Secondary Billing System'), ('backup', 'Backup System'), ('specialty', 'Specialty Billing'), ('reporting', 'Reporting Only'), ('analytics', 'Analytics Only'), ('archive', 'Archive System')], default='primary', max_length=20)),
                ('integration_status', models.CharField(choices=[('active', 'Active'), ('inactive', 'Inactive'), ('testing', 'Testing'), ('implementation', 'Implementation In Progress'), ('suspended', 'Suspended'), ('failed', 'Failed'), ('maintenance', 'Under Maintenance'), ('migrating', 'Migrating'), ('deprecated', 'Deprecated')], default='inactive', max_length=20)),
                ('api_endpoint', models.URLField(blank=True, help_text='API endpoint for the billing system')),
                ('api_key', models.CharField(blank=True, help_text='Encrypted API key', max_length=500)),
                ('api_secret', models.CharField(blank=True, help_text='Encrypted API secret', max_length=500)),
                ('webhook_url', models.URLField(blank=True, help_text='Webhook URL for receiving updates')),
                ('webhook_secret', models.CharField(blank=True, help_text='Webhook verification secret', max_length=200)),
                ('data_sync_method', models.CharField(choices=[('real_time', 'Real-time Sync'), ('batch', 'Batch Processing'), ('scheduled', 'Scheduled Sync'), ('manual', 'Manual Upload'), ('api_webhook', 'API with Webhooks'), ('file_transfer', 'File Transfer'), ('hybrid', 'Hybrid Approach')], default='real_time', max_length=20)),
                ('sync_frequency_minutes', models.PositiveIntegerField(blank=True, help_text='Sync frequency in minutes for scheduled sync', null=True)),
                ('last_sync_timestamp', models.DateTimeField(blank=True, help_text='Last successful synchronization', null=True)),
                ('next_sync_scheduled', models.DateTimeField(blank=True, help_text='Next scheduled synchronization', null=True)),
                ('patient_id_mapping', models.JSONField(default=dict, help_text='Patient ID mapping configuration')),
                ('procedure_code_mapping', models.JSONField(default=dict, help_text='Procedure code mapping configuration')),
                ('diagnosis_code_mapping', models.JSONField(default=dict, help_text='Diagnosis code mapping configuration')),
                ('insurance_mapping', models.JSONField(default=dict, help_text='Insurance provider mapping configuration')),
                ('custom_field_mapping', models.JSONField(default=dict, help_text='Custom field mapping configuration')),
                ('default_billing_rules', models.JSONField(default=dict, help_text='Default billing rules and configurations')),
                ('payment_terms_days', models.PositiveIntegerField(default=30, help_text='Default payment terms in days')),
                ('automatic_billing_enabled', models.BooleanField(default=False, help_text='Whether automatic billing is enabled')),
                ('invoice_generation_enabled', models.BooleanField(default=True, help_text='Whether automatic invoice generation is enabled')),
                ('claims_submission_enabled', models.BooleanField(default=False, help_text='Whether claims submission is enabled')),
                ('auto_claims_submission', models.BooleanField(default=False, help_text='Whether automatic claims submission is enabled')),
                ('claims_batch_size', models.PositiveIntegerField(default=100, help_text='Batch size for claims submission')),
                ('claims_retry_attempts', models.PositiveIntegerField(default=3, help_text='Number of retry attempts for failed claims')),
                ('transaction_fee_percentage', models.DecimalField(decimal_places=4, default=Decimal('0.0000'), help_text='Transaction fee percentage', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('monthly_subscription_fee', models.DecimalField(blank=True, decimal_places=2, help_text='Monthly subscription fee', max_digits=10, null=True)),
                ('setup_fee_paid', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Setup fee paid', max_digits=10)),
                ('currency', models.CharField(default='USD', help_text='Currency for fees', max_length=3)),
                ('total_transactions_processed', models.PositiveIntegerField(default=0, help_text='Total number of transactions processed')),
                ('successful_transactions', models.PositiveIntegerField(default=0, help_text='Number of successful transactions')),
                ('failed_transactions', models.PositiveIntegerField(default=0, help_text='Number of failed transactions')),
                ('average_processing_time_seconds', models.DecimalField(blank=True, decimal_places=2, help_text='Average processing time in seconds', max_digits=8, null=True)),
                ('uptime_percentage', models.DecimalField(blank=True, decimal_places=2, help_text='Integration uptime percentage', max_digits=5, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('error_notification_emails', models.JSONField(default=list, help_text='Email addresses for error notifications')),
                ('max_retry_attempts', models.PositiveIntegerField(default=3, help_text='Maximum retry attempts for failed operations')),
                ('retry_delay_seconds', models.PositiveIntegerField(default=60, help_text='Delay between retry attempts in seconds')),
                ('error_log_retention_days', models.PositiveIntegerField(default=90, help_text='Number of days to retain error logs')),
                ('encryption_enabled', models.BooleanField(default=True, help_text='Whether data encryption is enabled')),
                ('ssl_verification', models.BooleanField(default=True, help_text='Whether SSL certificate verification is enabled')),
                ('ip_whitelist', models.JSONField(default=list, help_text='IP addresses allowed to access the integration')),
                ('rate_limit_enabled', models.BooleanField(default=True, help_text='Whether rate limiting is enabled')),
                ('rate_limit_requests_per_minute', models.PositiveIntegerField(default=60, help_text='Maximum requests per minute')),
                ('implementation_date', models.DateField(blank=True, help_text='Date integration was implemented', null=True)),
                ('go_live_date', models.DateField(blank=True, help_text='Date integration went live', null=True)),
                ('implementation_team', models.JSONField(default=list, help_text='Team members involved in implementation')),
                ('vendor_contacts', models.JSONField(default=list, help_text='Vendor contact information')),
                ('billing_schedules', models.JSONField(default=list, help_text='Billing schedule configurations')),
                ('approval_workflows', models.JSONField(default=list, help_text='Approval workflow configurations')),
                ('discount_rules', models.JSONField(default=list, help_text='Discount and pricing rules')),
                ('collection_policies', models.JSONField(default=list, help_text='Collection policy configurations')),
                ('reporting_enabled', models.BooleanField(default=True, help_text='Whether reporting is enabled')),
                ('report_generation_schedule', models.JSONField(default=list, help_text='Automated report generation schedule')),
                ('dashboard_metrics', models.JSONField(default=list, help_text='Metrics displayed on dashboard')),
                ('custom_reports', models.JSONField(default=list, help_text='Custom report configurations')),
                ('audit_logging_enabled', models.BooleanField(default=True, help_text='Whether audit logging is enabled')),
                ('compliance_monitoring', models.BooleanField(default=True, help_text='Whether compliance monitoring is enabled')),
                ('audit_trail', models.JSONField(default=list, help_text='Audit trail of integration changes')),
                ('compliance_checks', models.JSONField(default=list, help_text='Compliance check configurations')),
                ('backup_enabled', models.BooleanField(default=True, help_text='Whether data backup is enabled')),
                ('backup_frequency_hours', models.PositiveIntegerField(default=24, help_text='Backup frequency in hours')),
                ('backup_retention_days', models.PositiveIntegerField(default=30, help_text='Backup retention period in days')),
                ('disaster_recovery_plan', models.TextField(blank=True, help_text='Disaster recovery plan')),
                ('test_mode_enabled', models.BooleanField(default=False, help_text='Whether test mode is enabled')),
                ('sandbox_environment_url', models.URLField(blank=True, help_text='Sandbox environment URL for testing')),
                ('last_test_date', models.DateTimeField(blank=True, help_text='Date of last integration test', null=True)),
                ('test_results', models.JSONField(default=list, help_text='Results of integration tests')),
                ('contract_start_date', models.DateField(blank=True, help_text='Contract start date', null=True)),
                ('contract_end_date', models.DateField(blank=True, help_text='Contract end date', null=True)),
                ('auto_renewal_enabled', models.BooleanField(default=False, help_text='Whether contract auto-renewal is enabled')),
                ('termination_notice_days', models.PositiveIntegerField(default=30, help_text='Required notice period for termination in days')),
                ('support_contact_email', models.EmailField(blank=True, help_text='Support contact email', max_length=254)),
                ('support_contact_phone', models.CharField(blank=True, help_text='Support contact phone', max_length=20)),
                ('maintenance_windows', models.JSONField(default=list, help_text='Scheduled maintenance windows')),
                ('escalation_procedures', models.JSONField(default=list, help_text='Issue escalation procedures')),
                ('authorized_users', models.JSONField(default=list, help_text='Users authorized to access this integration')),
                ('role_based_permissions', models.JSONField(default=dict, help_text='Role-based permission configurations')),
                ('access_logs', models.JSONField(default=list, help_text='User access logs')),
                ('is_active', models.BooleanField(default=True, help_text='Whether integration is active')),
                ('requires_attention', models.BooleanField(default=False, help_text='Whether integration requires attention')),
                ('health_status', models.CharField(choices=[('healthy', 'Healthy'), ('warning', 'Warning'), ('critical', 'Critical'), ('down', 'Down'), ('unknown', 'Unknown')], default='unknown', help_text='Overall health status of integration', max_length=20)),
                ('integration_notes', models.TextField(blank=True, help_text='Notes about the integration')),
                ('known_issues', models.TextField(blank=True, help_text='Known issues or limitations')),
                ('future_enhancements', models.TextField(blank=True, help_text='Planned future enhancements')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('billing_system', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='hospital_integrations', to='api.billingsystem')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='created_billing_integrations', to=settings.AUTH_USER_MODEL)),
                ('hospital', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='billing_integrations', to='api.hospital')),
                ('last_modified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='modified_billing_integrations', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-integration_type', 'integration_name'],
                'permissions': [('can_manage_billing_integrations', 'Can manage billing integrations'), ('can_configure_billing_systems', 'Can configure billing systems'), ('can_view_billing_metrics', 'Can view billing metrics'), ('can_test_integrations', 'Can test integrations')],
            },
        ),
        migrations.CreateModel(
            name='HospitalCertification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('certification_number', models.CharField(help_text='Official certification number', max_length=100)),
                ('certification_name', models.CharField(help_text='Name of the certification program', max_length=200)),
                ('certification_standard', models.CharField(blank=True, help_text='Standard or framework used (e.g., ISO 9001, NABH)', max_length=100)),
                ('certification_scope', models.TextField(blank=True, help_text='Scope of certification (departments, services covered)')),
                ('certification_status', models.CharField(choices=[('active', 'Active'), ('expired', 'Expired'), ('suspended', 'Suspended'), ('revoked', 'Revoked'), ('pending', 'Pending Assessment'), ('under_review', 'Under Review'), ('provisional', 'Provisional'), ('denied', 'Denied')], default='active', max_length=20)),
                ('certification_level', models.CharField(blank=True, choices=[('gold', 'Gold Standard'), ('silver', 'Silver Level'), ('bronze', 'Bronze Level'), ('platinum', 'Platinum Excellence'), ('advanced', 'Advanced Certification'), ('basic', 'Basic Certification'), ('conditional', 'Conditional Approval'), ('full', 'Full Accreditation'), ('partial', 'Partial Accreditation'), ('other', 'Other Level')], help_text='Level or grade of certification achieved', max_length=20)),
                ('assessment_type', models.CharField(choices=[('initial', 'Initial Assessment'), ('renewal', 'Renewal Assessment'), ('surveillance', 'Surveillance Assessment'), ('follow_up', 'Follow-up Assessment'), ('complaint_based', 'Complaint-Based Assessment'), ('voluntary', 'Voluntary Assessment'), ('mandated', 'Mandated Assessment')], default='initial', max_length=20)),
                ('application_date', models.DateField(blank=True, help_text='Date application was submitted', null=True)),
                ('assessment_start_date', models.DateField(blank=True, help_text='Date assessment began', null=True)),
                ('assessment_completion_date', models.DateField(blank=True, help_text='Date assessment was completed', null=True)),
                ('certificate_issue_date', models.DateField(help_text='Date certificate was issued')),
                ('certificate_expiry_date', models.DateField(blank=True, help_text='Date certificate expires', null=True)),
                ('overall_score', models.DecimalField(blank=True, decimal_places=2, help_text='Overall assessment score (0-100)', max_digits=5, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('compliance_percentage', models.DecimalField(blank=True, decimal_places=2, help_text='Compliance percentage achieved', max_digits=5, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('assessment_criteria_scores', models.JSONField(default=dict, help_text='Detailed scores for each assessment criteria')),
                ('strengths_identified', models.TextField(blank=True, help_text='Key strengths identified during assessment')),
                ('areas_for_improvement', models.TextField(blank=True, help_text='Areas identified for improvement')),
                ('certification_conditions', models.TextField(blank=True, help_text='Conditions attached to the certification')),
                ('corrective_actions_required', models.TextField(blank=True, help_text='Corrective actions required to maintain certification')),
                ('corrective_actions_deadline', models.DateField(blank=True, help_text='Deadline for completing corrective actions', null=True)),
                ('corrective_actions_completed', models.BooleanField(default=False, help_text='Whether corrective actions have been completed')),
                ('lead_assessor_name', models.CharField(blank=True, help_text='Name of lead assessor', max_length=100)),
                ('assessment_team_size', models.PositiveIntegerField(blank=True, help_text='Number of assessors in the team', null=True)),
                ('assessment_duration_days', models.PositiveIntegerField(blank=True, help_text='Duration of assessment in days', null=True)),
                ('on_site_assessment_days', models.PositiveIntegerField(blank=True, help_text='Number of days spent on-site', null=True)),
                ('next_renewal_due', models.DateField(blank=True, help_text='Date when next renewal is due', null=True)),
                ('surveillance_assessments_required', models.BooleanField(default=False, help_text='Whether surveillance assessments are required')),
                ('next_surveillance_due', models.DateField(blank=True, help_text='Date when next surveillance assessment is due', null=True)),
                ('surveillance_frequency_months', models.PositiveIntegerField(blank=True, help_text='Frequency of surveillance assessments in months', null=True)),
                ('assessment_fee_paid', models.DecimalField(blank=True, decimal_places=2, help_text='Assessment fee paid', max_digits=10, null=True)),
                ('certification_fee_paid', models.DecimalField(blank=True, decimal_places=2, help_text='Certification fee paid', max_digits=10, null=True)),
                ('annual_maintenance_fee', models.DecimalField(blank=True, decimal_places=2, help_text='Annual maintenance fee', max_digits=10, null=True)),
                ('currency', models.CharField(default='USD', help_text='Currency for fees', max_length=3)),
                ('certificate_document', models.FileField(blank=True, help_text='Digital copy of certificate', null=True, upload_to='certifications/certificates/')),
                ('assessment_report', models.FileField(blank=True, help_text='Assessment report document', null=True, upload_to='certifications/reports/')),
                ('supporting_documents', models.JSONField(default=list, help_text='List of supporting documents')),
                ('evidence_provided', models.JSONField(default=list, help_text='List of evidence provided during assessment')),
                ('public_display_permission', models.CharField(choices=[('public', 'Public Display Authorized'), ('restricted', 'Restricted Display'), ('internal', 'Internal Use Only'), ('confidential', 'Confidential')], default='public', max_length=20)),
                ('display_on_website', models.BooleanField(default=True, help_text='Whether to display on hospital website')),
                ('marketing_materials_approved', models.BooleanField(default=False, help_text='Whether marketing materials have been approved')),
                ('logo_usage_approved', models.BooleanField(default=False, help_text='Whether certification body logo usage is approved')),
                ('verification_url', models.URLField(blank=True, help_text='URL to verify certification online')),
                ('public_verification_code', models.CharField(blank=True, help_text='Public verification code', max_length=50)),
                ('last_verified', models.DateTimeField(blank=True, help_text='Last time certification was verified', null=True)),
                ('auto_verification_enabled', models.BooleanField(default=False, help_text='Whether automatic verification is enabled')),
                ('patient_satisfaction_improvement', models.DecimalField(blank=True, decimal_places=2, help_text='Patient satisfaction improvement percentage', max_digits=5, null=True)),
                ('quality_metrics_improvement', models.JSONField(default=dict, help_text='Improvement in various quality metrics')),
                ('staff_engagement_improvement', models.DecimalField(blank=True, decimal_places=2, help_text='Staff engagement improvement percentage', max_digits=5, null=True)),
                ('operational_efficiency_improvement', models.DecimalField(blank=True, decimal_places=2, help_text='Operational efficiency improvement percentage', max_digits=5, null=True)),
                ('awards_received', models.JSONField(default=list, help_text='Awards received related to this certification')),
                ('peer_recognition', models.TextField(blank=True, help_text='Recognition from peer organizations')),
                ('media_coverage', models.JSONField(default=list, help_text='Media coverage of certification achievement')),
                ('previous_certification_number', models.CharField(blank=True, help_text='Previous certification number (if renewed)', max_length=100)),
                ('certification_history', models.JSONField(default=list, help_text='History of certification changes')),
                ('assessment_history', models.JSONField(default=list, help_text='History of assessments conducted')),
                ('expiry_alert_sent', models.BooleanField(default=False, help_text='Whether expiry alert has been sent')),
                ('renewal_alert_sent', models.BooleanField(default=False, help_text='Whether renewal alert has been sent')),
                ('surveillance_alert_sent', models.BooleanField(default=False, help_text='Whether surveillance alert has been sent')),
                ('is_transferable', models.BooleanField(default=False, help_text='Whether certification can be transferred')),
                ('requires_continuous_compliance', models.BooleanField(default=True, help_text='Whether continuous compliance monitoring is required')),
                ('patient_impact_documented', models.BooleanField(default=False, help_text='Whether patient impact has been documented')),
                ('is_active', models.BooleanField(default=True, help_text='Whether certification record is active')),
                ('notes', models.TextField(blank=True, help_text='Additional notes about the certification')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('certification_body', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='hospital_certifications', to='api.certificationbody')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='created_hospital_certifications', to=settings.AUTH_USER_MODEL)),
                ('hospital', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='certifications', to='api.hospital')),
                ('last_modified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='modified_hospital_certifications', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-certificate_issue_date', 'certification_name'],
                'permissions': [('can_manage_certifications', 'Can manage hospital certifications'), ('can_view_certification_details', 'Can view certification details'), ('can_verify_certifications', 'Can verify certification status'), ('can_update_assessment_scores', 'Can update assessment scores')],
            },
        ),
        migrations.CreateModel(
            name='HospitalCompliance',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('compliance_status', models.CharField(choices=[('compliant', 'Fully Compliant'), ('partial', 'Partially Compliant'), ('non_compliant', 'Non-Compliant'), ('in_progress', 'Implementation In Progress'), ('assessment_pending', 'Assessment Pending'), ('remediation_required', 'Remediation Required'), ('under_review', 'Under Review'), ('exempted', 'Exempted'), ('not_applicable', 'Not Applicable'), ('unknown', 'Status Unknown')], default='unknown', max_length=20)),
                ('implementation_status', models.CharField(choices=[('not_started', 'Not Started'), ('planning', 'Planning Phase'), ('in_progress', 'Implementation In Progress'), ('testing', 'Testing Phase'), ('completed', 'Implementation Completed'), ('maintenance', 'Maintenance Mode'), ('updating', 'Updating Implementation'), ('suspended', 'Implementation Suspended'), ('failed', 'Implementation Failed')], default='not_started', max_length=20)),
                ('risk_level', models.CharField(choices=[('critical', 'Critical Risk'), ('high', 'High Risk'), ('medium', 'Medium Risk'), ('low', 'Low Risk'), ('minimal', 'Minimal Risk'), ('none', 'No Risk')], default='medium', max_length=10)),
                ('last_assessment_date', models.DateField(blank=True, help_text='Date of last compliance assessment', null=True)),
                ('last_assessment_type', models.CharField(blank=True, choices=[('self_assessment', 'Self Assessment'), ('internal_audit', 'Internal Audit'), ('external_audit', 'External Audit'), ('third_party_review', 'Third-Party Review'), ('regulatory_inspection', 'Regulatory Inspection'), ('certification_audit', 'Certification Audit'), ('peer_review', 'Peer Review'), ('continuous_monitoring', 'Continuous Monitoring')], max_length=25)),
                ('next_assessment_due', models.DateField(blank=True, help_text='Date when next assessment is due', null=True)),
                ('assessment_frequency_months', models.PositiveIntegerField(blank=True, help_text='Frequency of assessments in months', null=True)),
                ('overall_compliance_score', models.DecimalField(blank=True, decimal_places=2, help_text='Overall compliance score (0-100)', max_digits=5, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('policy_compliance_score', models.DecimalField(blank=True, decimal_places=2, help_text='Policy compliance score (0-100)', max_digits=5, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('technical_compliance_score', models.DecimalField(blank=True, decimal_places=2, help_text='Technical compliance score (0-100)', max_digits=5, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('training_compliance_score', models.DecimalField(blank=True, decimal_places=2, help_text='Training compliance score (0-100)', max_digits=5, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('implementation_start_date', models.DateField(blank=True, help_text='Date implementation started', null=True)),
                ('implementation_target_date', models.DateField(blank=True, help_text='Target completion date for implementation', null=True)),
                ('implementation_completion_date', models.DateField(blank=True, help_text='Actual completion date', null=True)),
                ('implementation_budget', models.DecimalField(blank=True, decimal_places=2, help_text='Budget allocated for implementation', max_digits=12, null=True)),
                ('implementation_cost_actual', models.DecimalField(blank=True, decimal_places=2, help_text='Actual cost of implementation', max_digits=12, null=True)),
                ('currency', models.CharField(default='USD', help_text='Currency for costs', max_length=3)),
                ('required_policies_implemented', models.JSONField(default=list, help_text='List of required policies that have been implemented')),
                ('required_policies_pending', models.JSONField(default=list, help_text='List of required policies that are pending')),
                ('training_programs_completed', models.JSONField(default=list, help_text='List of completed training programs')),
                ('training_programs_pending', models.JSONField(default=list, help_text='List of pending training programs')),
                ('technical_controls_implemented', models.JSONField(default=list, help_text='List of implemented technical controls')),
                ('technical_controls_pending', models.JSONField(default=list, help_text='List of pending technical controls')),
                ('identified_gaps', models.JSONField(default=list, help_text='List of identified compliance gaps')),
                ('remediation_actions', models.JSONField(default=list, help_text='List of remediation actions required')),
                ('remediation_deadline', models.DateField(blank=True, help_text='Deadline for completing remediation', null=True)),
                ('remediation_completed', models.BooleanField(default=False, help_text='Whether remediation has been completed')),
                ('remediation_completion_date', models.DateField(blank=True, help_text='Date remediation was completed', null=True)),
                ('violations_count', models.PositiveIntegerField(default=0, help_text='Number of compliance violations')),
                ('last_violation_date', models.DateField(blank=True, help_text='Date of last violation', null=True)),
                ('violation_history', models.JSONField(default=list, help_text='History of compliance violations')),
                ('incident_count', models.PositiveIntegerField(default=0, help_text='Number of compliance-related incidents')),
                ('incident_history', models.JSONField(default=list, help_text='History of compliance incidents')),
                ('compliance_documentation', models.JSONField(default=list, help_text='List of compliance documentation')),
                ('evidence_repository', models.JSONField(default=list, help_text='Repository of compliance evidence')),
                ('audit_trail', models.JSONField(default=list, help_text='Audit trail of compliance activities')),
                ('supporting_documents', models.FileField(blank=True, help_text='Supporting compliance documents', null=True, upload_to='compliance/documents/')),
                ('implementation_team', models.JSONField(default=list, help_text='Team members involved in implementation')),
                ('external_consultants', models.JSONField(default=list, help_text='External consultants involved')),
                ('monitoring_frequency', models.CharField(choices=[('daily', 'Daily'), ('weekly', 'Weekly'), ('monthly', 'Monthly'), ('quarterly', 'Quarterly'), ('annually', 'Annually'), ('continuous', 'Continuous'), ('on_demand', 'On Demand')], default='monthly', help_text='Frequency of compliance monitoring', max_length=20)),
                ('automated_monitoring_enabled', models.BooleanField(default=False, help_text='Whether automated monitoring is enabled')),
                ('monitoring_tools', models.JSONField(default=list, help_text='Tools used for compliance monitoring')),
                ('last_monitoring_date', models.DateTimeField(blank=True, help_text='Last monitoring check date', null=True)),
                ('reporting_schedule', models.JSONField(default=list, help_text='Schedule for compliance reporting')),
                ('stakeholder_communications', models.JSONField(default=list, help_text='Communications to stakeholders about compliance')),
                ('regulatory_submissions', models.JSONField(default=list, help_text='Submissions to regulatory bodies')),
                ('staff_training_completion_rate', models.DecimalField(blank=True, decimal_places=2, help_text='Percentage of staff who completed training', max_digits=5, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('policy_acknowledgment_rate', models.DecimalField(blank=True, decimal_places=2, help_text='Percentage of staff who acknowledged policies', max_digits=5, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('incident_response_time_hours', models.DecimalField(blank=True, decimal_places=2, help_text='Average incident response time in hours', max_digits=8, null=True)),
                ('compliance_trend', models.CharField(choices=[('improving', 'Improving'), ('stable', 'Stable'), ('declining', 'Declining'), ('volatile', 'Volatile'), ('unknown', 'Unknown')], default='unknown', help_text='Trend in compliance performance', max_length=20)),
                ('improvement_initiatives', models.JSONField(default=list, help_text='Active compliance improvement initiatives')),
                ('lessons_learned', models.TextField(blank=True, help_text='Lessons learned from compliance implementation')),
                ('regulatory_relationships', models.JSONField(default=list, help_text='Relationships with regulatory bodies')),
                ('industry_partnerships', models.JSONField(default=list, help_text='Partnerships for compliance best practices')),
                ('peer_benchmarking', models.JSONField(default=list, help_text='Benchmarking data with peer organizations')),
                ('compliance_software', models.JSONField(default=list, help_text='Software tools used for compliance management')),
                ('integration_apis', models.JSONField(default=list, help_text='API integrations for compliance monitoring')),
                ('data_sources', models.JSONField(default=list, help_text='Data sources for compliance monitoring')),
                ('alert_thresholds', models.JSONField(default=dict, help_text='Thresholds for compliance alerts')),
                ('notification_recipients', models.JSONField(default=list, help_text='Recipients for compliance notifications')),
                ('escalation_procedures', models.JSONField(default=list, help_text='Procedures for escalating compliance issues')),
                ('is_active', models.BooleanField(default=True, help_text='Whether compliance record is active')),
                ('requires_immediate_attention', models.BooleanField(default=False, help_text='Whether this compliance area needs immediate attention')),
                ('executive_visibility', models.BooleanField(default=False, help_text='Whether this compliance area has executive visibility')),
                ('special_considerations', models.TextField(blank=True, help_text='Special considerations for this compliance area')),
                ('external_dependencies', models.TextField(blank=True, help_text='External dependencies affecting compliance')),
                ('notes', models.TextField(blank=True, help_text='Additional notes about compliance status')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('compliance_framework', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='hospital_compliance_records', to='api.complianceframework')),
                ('compliance_officer', models.ForeignKey(blank=True, help_text='Designated compliance officer', null=True, on_delete=django.db.models.deletion.PROTECT, related_name='compliance_responsibilities', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='created_hospital_compliance', to=settings.AUTH_USER_MODEL)),
                ('hospital', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='compliance_records', to='api.hospital')),
                ('last_modified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='modified_hospital_compliance', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-risk_level', 'compliance_framework__priority_level', 'compliance_framework__name'],
                'permissions': [('can_manage_hospital_compliance', 'Can manage hospital compliance'), ('can_view_compliance_details', 'Can view compliance details'), ('can_conduct_assessments', 'Can conduct compliance assessments'), ('can_approve_remediation', 'Can approve remediation plans')],
            },
        ),
        migrations.CreateModel(
            name='Message',
            fields=[
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('encrypted_content', models.TextField()),
                ('content_hash', models.CharField(max_length=64)),
                ('message_type', models.CharField(choices=[('text', 'Text Message'), ('file', 'File Attachment'), ('image', 'Image'), ('voice', 'Voice Message'), ('video', 'Video Message'), ('location', 'Location'), ('system', 'System Message'), ('emergency_alert', 'Emergency Alert')], default='text', max_length=20)),
                ('status', models.CharField(choices=[('sent', 'Sent'), ('delivered', 'Delivered'), ('read', 'Read'), ('failed', 'Failed')], default='sent', max_length=20)),
                ('priority_level', models.CharField(choices=[('routine', 'Routine'), ('urgent', 'Urgent'), ('emergency', 'Emergency')], default='routine', max_length=20)),
                ('is_edited', models.BooleanField(default=False)),
                ('edited_at', models.DateTimeField(blank=True, null=True)),
                ('is_deleted', models.BooleanField(default=False)),
                ('deleted_at', models.DateTimeField(blank=True, null=True)),
                ('is_forwarded', models.BooleanField(default=False)),
                ('department_context', models.CharField(blank=True, max_length=100, null=True)),
                ('delivered_at', models.DateTimeField(blank=True, null=True)),
                ('read_at', models.DateTimeField(blank=True, null=True)),
                ('is_encrypted', models.BooleanField(default=True)),
                ('encryption_version', models.CharField(default='v1', max_length=10)),
                ('requires_audit', models.BooleanField(default=True)),
                ('file_size', models.PositiveIntegerField(blank=True, null=True)),
                ('file_type', models.CharField(blank=True, max_length=100, null=True)),
                ('duration', models.PositiveIntegerField(blank=True, help_text='Duration in seconds for voice/video', null=True)),
                ('appointment_context', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='related_messages', to='api.appointment')),
                ('conversation', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='messages', to='api.conversation')),
                ('patient_context', models.ForeignKey(blank=True, help_text='Patient this message relates to', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='related_messages', to=settings.AUTH_USER_MODEL)),
                ('reply_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='replies', to='api.message')),
                ('sender', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='sent_messages', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'messaging_message',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='MessageAttachment',
            fields=[
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('file', models.FileField(upload_to='messaging/attachments/%Y/%m/%d/', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp', 'pdf', 'doc', 'docx', 'txt', 'rtf', 'mp3', 'wav', 'ogg', 'mp4', 'avi', 'mov', 'dcm', 'dicom'])])),
                ('original_filename', models.CharField(max_length=255)),
                ('file_size', models.PositiveIntegerField()),
                ('file_type', models.CharField(max_length=100)),
                ('attachment_type', models.CharField(choices=[('image', 'Image'), ('document', 'Document'), ('voice', 'Voice Message'), ('video', 'Video'), ('audio', 'Audio'), ('medical_image', 'Medical Image'), ('lab_result', 'Lab Result'), ('prescription', 'Prescription'), ('xray', 'X-Ray'), ('other', 'Other')], default='other', max_length=20)),
                ('thumbnail', models.ImageField(blank=True, help_text='Thumbnail for images and videos', null=True, upload_to='messaging/thumbnails/%Y/%m/%d/')),
                ('duration', models.PositiveIntegerField(blank=True, help_text='Duration in seconds for audio/video files', null=True)),
                ('security_level', models.CharField(choices=[('public', 'Public'), ('internal', 'Internal Only'), ('confidential', 'Confidential'), ('restricted', 'Restricted')], default='internal', max_length=20)),
                ('medical_category', models.CharField(blank=True, max_length=100, null=True)),
                ('is_encrypted', models.BooleanField(default=True)),
                ('encryption_key_id', models.CharField(blank=True, max_length=100, null=True)),
                ('virus_scan_status', models.CharField(choices=[('pending', 'Pending'), ('clean', 'Clean'), ('infected', 'Infected'), ('error', 'Scan Error')], default='pending', max_length=20)),
                ('virus_scan_date', models.DateTimeField(blank=True, null=True)),
                ('download_count', models.PositiveIntegerField(default=0)),
                ('last_accessed', models.DateTimeField(blank=True, null=True)),
                ('is_public', models.BooleanField(default=False)),
                ('expiry_date', models.DateTimeField(blank=True, null=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('message', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='attachments', to='api.message')),
                ('patient_context', models.ForeignKey(blank=True, help_text='Patient this attachment relates to', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='medical_attachments', to=settings.AUTH_USER_MODEL)),
                ('uploaded_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='uploaded_attachments', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'messaging_attachment',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='MessageAuditLog',
            fields=[
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('action', models.CharField(choices=[('message_sent', 'Message Sent'), ('message_read', 'Message Read'), ('message_edited', 'Message Edited'), ('message_deleted', 'Message Deleted'), ('message_forwarded', 'Message Forwarded'), ('conversation_created', 'Conversation Created'), ('conversation_joined', 'Joined Conversation'), ('conversation_left', 'Left Conversation'), ('participant_added', 'Participant Added'), ('participant_removed', 'Participant Removed'), ('attachment_uploaded', 'Attachment Uploaded'), ('attachment_downloaded', 'Attachment Downloaded'), ('attachment_viewed', 'Attachment Viewed'), ('attachment_deleted', 'Attachment Deleted'), ('login_attempt', 'Login Attempt'), ('unauthorized_access', 'Unauthorized Access'), ('encryption_failure', 'Encryption Failure'), ('decryption_failure', 'Decryption Failure'), ('storage_strategy_switch', 'Storage Strategy Switch'), ('data_migration', 'Data Migration'), ('backup_created', 'Backup Created'), ('retention_cleanup', 'Retention Cleanup'), ('patient_context_added', 'Patient Context Added'), ('patient_context_removed', 'Patient Context Removed'), ('medical_data_accessed', 'Medical Data Accessed'), ('emergency_alert_sent', 'Emergency Alert Sent')], max_length=50)),
                ('description', models.TextField(blank=True, null=True)),
                ('risk_level', models.CharField(choices=[('low', 'Low Risk'), ('medium', 'Medium Risk'), ('high', 'High Risk'), ('critical', 'Critical Risk')], default='low', max_length=20)),
                ('user_role', models.CharField(blank=True, max_length=100, null=True)),
                ('user_department', models.CharField(blank=True, max_length=100, null=True)),
                ('timestamp', models.DateTimeField(db_index=True, default=django.utils.timezone.now)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.TextField(blank=True, null=True)),
                ('session_id', models.CharField(blank=True, max_length=100, null=True)),
                ('department_context', models.CharField(blank=True, max_length=100, null=True)),
                ('details', models.JSONField(blank=True, default=dict)),
                ('is_suspicious', models.BooleanField(default=False)),
                ('requires_investigation', models.BooleanField(default=False)),
                ('investigation_status', models.CharField(blank=True, choices=[('pending', 'Pending'), ('investigating', 'Under Investigation'), ('resolved', 'Resolved'), ('false_positive', 'False Positive')], max_length=20, null=True)),
                ('retention_date', models.DateTimeField(blank=True, help_text='Date when this audit log should be archived/deleted', null=True)),
                ('attachment', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='audit_logs', to='api.messageattachment')),
                ('conversation', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='audit_logs', to='api.conversation')),
                ('hospital_context', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='messaging_audit_logs', to='api.hospital')),
                ('message', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='audit_logs', to='api.message')),
                ('patient_context', models.ForeignKey(blank=True, help_text='Patient affected by this action', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='audit_logs_as_patient', to=settings.AUTH_USER_MODEL)),
                ('user', models.ForeignKey(blank=True, help_text='User who performed the action (null for system actions)', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='audit_logs', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'messaging_audit_log',
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='MessageMetadata',
            fields=[
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('firebase_id', models.CharField(db_index=True, max_length=100, unique=True)),
                ('cloud_storage_provider', models.CharField(default='firebase', max_length=50)),
                ('conversation_id', models.UUIDField(db_index=True)),
                ('sender_id', models.UUIDField(db_index=True)),
                ('message_type', models.CharField(default='text', max_length=20)),
                ('priority_level', models.CharField(default='routine', max_length=20)),
                ('message_created_at', models.DateTimeField(db_index=True)),
                ('archived_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('is_deleted', models.BooleanField(default=False)),
                ('is_encrypted', models.BooleanField(default=True)),
                ('content_preview', models.CharField(blank=True, max_length=200, null=True)),
                ('has_attachments', models.BooleanField(default=False)),
                ('attachment_count', models.PositiveIntegerField(default=0)),
                ('has_patient_context', models.BooleanField(default=False)),
                ('patient_id', models.UUIDField(blank=True, db_index=True, null=True)),
                ('department_context', models.CharField(blank=True, max_length=100, null=True)),
            ],
            options={
                'db_table': 'messaging_metadata',
                'ordering': ['-message_created_at'],
                'indexes': [models.Index(fields=['conversation_id', 'message_created_at'], name='messaging_m_convers_c52cfc_idx'), models.Index(fields=['sender_id', 'message_created_at'], name='messaging_m_sender__0841c3_idx'), models.Index(fields=['firebase_id'], name='messaging_m_firebas_6a13bd_idx'), models.Index(fields=['message_type', 'priority_level'], name='messaging_m_message_cd160c_idx'), models.Index(fields=['patient_id', 'has_patient_context'], name='messaging_m_patient_5f9b53_idx'), models.Index(fields=['is_deleted', 'message_created_at'], name='messaging_m_is_dele_fd66fe_idx')],
            },
        ),
        migrations.CreateModel(
            name='MessageParticipant',
            fields=[
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('role', models.CharField(choices=[('member', 'Member'), ('admin', 'Admin'), ('moderator', 'Moderator'), ('owner', 'Owner'), ('observer', 'Observer')], default='member', max_length=20)),
                ('is_active', models.BooleanField(default=True)),
                ('joined_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('left_at', models.DateTimeField(blank=True, null=True)),
                ('last_read_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('last_message_read_id', models.UUIDField(blank=True, null=True)),
                ('unread_count', models.PositiveIntegerField(default=0)),
                ('last_seen_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('is_typing', models.BooleanField(default=False)),
                ('typing_started_at', models.DateTimeField(blank=True, null=True)),
                ('notifications', models.CharField(choices=[('all', 'All Messages'), ('mentions', 'Mentions Only'), ('none', 'No Notifications'), ('emergency_only', 'Emergency Only')], default='all', max_length=20)),
                ('is_muted', models.BooleanField(default=False)),
                ('muted_until', models.DateTimeField(blank=True, null=True)),
                ('emergency_notifications', models.BooleanField(default=True)),
                ('department_notifications', models.BooleanField(default=True)),
                ('can_add_participants', models.BooleanField(default=True)),
                ('can_edit_conversation', models.BooleanField(default=False)),
                ('can_delete_messages', models.BooleanField(default=False)),
                ('conversation', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='participants', to='api.conversation')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='message_participations', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'messaging_participant',
                'ordering': ['-joined_at'],
            },
        ),
        migrations.AddIndex(
            model_name='billingsystem',
            index=models.Index(fields=['name'], name='api_billing_name_6a6227_idx'),
        ),
        migrations.AddIndex(
            model_name='billingsystem',
            index=models.Index(fields=['system_code'], name='api_billing_system__a470d7_idx'),
        ),
        migrations.AddIndex(
            model_name='billingsystem',
            index=models.Index(fields=['vendor_name'], name='api_billing_vendor__9194c1_idx'),
        ),
        migrations.AddIndex(
            model_name='billingsystem',
            index=models.Index(fields=['system_type'], name='api_billing_system__e4c9e4_idx'),
        ),
        migrations.AddIndex(
            model_name='billingsystem',
            index=models.Index(fields=['deployment_type'], name='api_billing_deploym_ca2a7d_idx'),
        ),
        migrations.AddIndex(
            model_name='billingsystem',
            index=models.Index(fields=['is_active'], name='api_billing_is_acti_75829e_idx'),
        ),
        migrations.AddIndex(
            model_name='billingsystem',
            index=models.Index(fields=['is_recommended'], name='api_billing_is_reco_c8344b_idx'),
        ),
        migrations.AddIndex(
            model_name='billingsystem',
            index=models.Index(fields=['certification_status'], name='api_billing_certifi_5fadfd_idx'),
        ),
        migrations.AddIndex(
            model_name='certificationbody',
            index=models.Index(fields=['name'], name='api_certifi_name_8d043c_idx'),
        ),
        migrations.AddIndex(
            model_name='certificationbody',
            index=models.Index(fields=['organization_code'], name='api_certifi_organiz_adb6d1_idx'),
        ),
        migrations.AddIndex(
            model_name='certificationbody',
            index=models.Index(fields=['headquarters_country'], name='api_certifi_headqua_b5de49_idx'),
        ),
        migrations.AddIndex(
            model_name='certificationbody',
            index=models.Index(fields=['organization_type'], name='api_certifi_organiz_a74456_idx'),
        ),
        migrations.AddIndex(
            model_name='certificationbody',
            index=models.Index(fields=['certification_scope'], name='api_certifi_certifi_2ee49b_idx'),
        ),
        migrations.AddIndex(
            model_name='certificationbody',
            index=models.Index(fields=['recognition_level'], name='api_certifi_recogni_c63fc1_idx'),
        ),
        migrations.AddIndex(
            model_name='certificationbody',
            index=models.Index(fields=['is_active'], name='api_certifi_is_acti_b93f51_idx'),
        ),
        migrations.AddIndex(
            model_name='complianceframework',
            index=models.Index(fields=['name'], name='api_complia_name_b5229c_idx'),
        ),
        migrations.AddIndex(
            model_name='complianceframework',
            index=models.Index(fields=['framework_code'], name='api_complia_framewo_e0ffc4_idx'),
        ),
        migrations.AddIndex(
            model_name='complianceframework',
            index=models.Index(fields=['framework_type'], name='api_complia_framewo_05390a_idx'),
        ),
        migrations.AddIndex(
            model_name='complianceframework',
            index=models.Index(fields=['scope_level'], name='api_complia_scope_l_ad6670_idx'),
        ),
        migrations.AddIndex(
            model_name='complianceframework',
            index=models.Index(fields=['enforcement_level'], name='api_complia_enforce_fe9722_idx'),
        ),
        migrations.AddIndex(
            model_name='complianceframework',
            index=models.Index(fields=['is_active'], name='api_complia_is_acti_1f83e4_idx'),
        ),
        migrations.AddIndex(
            model_name='complianceframework',
            index=models.Index(fields=['is_mandatory_for_hospitals'], name='api_complia_is_mand_a47832_idx'),
        ),
        migrations.AddIndex(
            model_name='complianceframework',
            index=models.Index(fields=['priority_level'], name='api_complia_priorit_4709d2_idx'),
        ),
        migrations.AddIndex(
            model_name='conversation',
            index=models.Index(fields=['conversation_type', 'hospital_context'], name='messaging_c_convers_ef218e_idx'),
        ),
        migrations.AddIndex(
            model_name='conversation',
            index=models.Index(fields=['priority_level', 'department'], name='messaging_c_priorit_cc1ac0_idx'),
        ),
        migrations.AddIndex(
            model_name='conversation',
            index=models.Index(fields=['last_message_at'], name='messaging_c_last_me_87f299_idx'),
        ),
        migrations.AddIndex(
            model_name='conversation',
            index=models.Index(fields=['is_archived', 'is_muted'], name='messaging_c_is_arch_28ae08_idx'),
        ),
        migrations.AddIndex(
            model_name='hospitalbillingintegration',
            index=models.Index(fields=['hospital', 'integration_status'], name='api_hospita_hospita_e697ab_idx'),
        ),
        migrations.AddIndex(
            model_name='hospitalbillingintegration',
            index=models.Index(fields=['billing_system'], name='api_hospita_billing_659b96_idx'),
        ),
        migrations.AddIndex(
            model_name='hospitalbillingintegration',
            index=models.Index(fields=['integration_type'], name='api_hospita_integra_f2345e_idx'),
        ),
        migrations.AddIndex(
            model_name='hospitalbillingintegration',
            index=models.Index(fields=['integration_status'], name='api_hospita_integra_13a427_idx'),
        ),
        migrations.AddIndex(
            model_name='hospitalbillingintegration',
            index=models.Index(fields=['health_status'], name='api_hospita_health__40d312_idx'),
        ),
        migrations.AddIndex(
            model_name='hospitalbillingintegration',
            index=models.Index(fields=['last_sync_timestamp'], name='api_hospita_last_sy_aeea6a_idx'),
        ),
        migrations.AddIndex(
            model_name='hospitalbillingintegration',
            index=models.Index(fields=['next_sync_scheduled'], name='api_hospita_next_sy_357a24_idx'),
        ),
        migrations.AddIndex(
            model_name='hospitalbillingintegration',
            index=models.Index(fields=['requires_attention'], name='api_hospita_require_af9b7e_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='hospitalbillingintegration',
            unique_together={('hospital', 'billing_system', 'integration_type')},
        ),
        migrations.AddIndex(
            model_name='hospitalcertification',
            index=models.Index(fields=['hospital', 'certification_status'], name='api_hospita_hospita_a68307_idx'),
        ),
        migrations.AddIndex(
            model_name='hospitalcertification',
            index=models.Index(fields=['certification_number'], name='api_hospita_certifi_975aee_idx'),
        ),
        migrations.AddIndex(
            model_name='hospitalcertification',
            index=models.Index(fields=['certification_body'], name='api_hospita_certifi_3d59c6_idx'),
        ),
        migrations.AddIndex(
            model_name='hospitalcertification',
            index=models.Index(fields=['certificate_expiry_date'], name='api_hospita_certifi_e99ea9_idx'),
        ),
        migrations.AddIndex(
            model_name='hospitalcertification',
            index=models.Index(fields=['next_renewal_due'], name='api_hospita_next_re_5780bd_idx'),
        ),
        migrations.AddIndex(
            model_name='hospitalcertification',
            index=models.Index(fields=['next_surveillance_due'], name='api_hospita_next_su_d635ae_idx'),
        ),
        migrations.AddIndex(
            model_name='hospitalcertification',
            index=models.Index(fields=['public_display_permission'], name='api_hospita_public__117bfb_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='hospitalcertification',
            unique_together={('hospital', 'certification_number', 'certification_body')},
        ),
        migrations.AddIndex(
            model_name='hospitalcompliance',
            index=models.Index(fields=['hospital', 'compliance_status'], name='api_hospita_hospita_16e160_idx'),
        ),
        migrations.AddIndex(
            model_name='hospitalcompliance',
            index=models.Index(fields=['compliance_framework'], name='api_hospita_complia_366487_idx'),
        ),
        migrations.AddIndex(
            model_name='hospitalcompliance',
            index=models.Index(fields=['compliance_status'], name='api_hospita_complia_f4b965_idx'),
        ),
        migrations.AddIndex(
            model_name='hospitalcompliance',
            index=models.Index(fields=['implementation_status'], name='api_hospita_impleme_606d81_idx'),
        ),
        migrations.AddIndex(
            model_name='hospitalcompliance',
            index=models.Index(fields=['risk_level'], name='api_hospita_risk_le_d7bb0b_idx'),
        ),
        migrations.AddIndex(
            model_name='hospitalcompliance',
            index=models.Index(fields=['next_assessment_due'], name='api_hospita_next_as_e5fae5_idx'),
        ),
        migrations.AddIndex(
            model_name='hospitalcompliance',
            index=models.Index(fields=['remediation_deadline'], name='api_hospita_remedia_5271fa_idx'),
        ),
        migrations.AddIndex(
            model_name='hospitalcompliance',
            index=models.Index(fields=['requires_immediate_attention'], name='api_hospita_require_13ea34_idx'),
        ),
        migrations.AddIndex(
            model_name='hospitalcompliance',
            index=models.Index(fields=['executive_visibility'], name='api_hospita_executi_09d790_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='hospitalcompliance',
            unique_together={('hospital', 'compliance_framework')},
        ),
        migrations.AddIndex(
            model_name='message',
            index=models.Index(fields=['conversation', 'created_at'], name='messaging_m_convers_7bc91b_idx'),
        ),
        migrations.AddIndex(
            model_name='message',
            index=models.Index(fields=['sender', 'created_at'], name='messaging_m_sender__277197_idx'),
        ),
        migrations.AddIndex(
            model_name='message',
            index=models.Index(fields=['status', 'priority_level'], name='messaging_m_status_b7e1db_idx'),
        ),
        migrations.AddIndex(
            model_name='message',
            index=models.Index(fields=['message_type', 'created_at'], name='messaging_m_message_1cb29d_idx'),
        ),
        migrations.AddIndex(
            model_name='message',
            index=models.Index(fields=['patient_context', 'appointment_context'], name='messaging_m_patient_e1f1ef_idx'),
        ),
        migrations.AddIndex(
            model_name='message',
            index=models.Index(fields=['is_deleted', 'created_at'], name='messaging_m_is_dele_aeecbe_idx'),
        ),
        migrations.AddIndex(
            model_name='messageattachment',
            index=models.Index(fields=['message', 'attachment_type'], name='messaging_a_message_9d39cc_idx'),
        ),
        migrations.AddIndex(
            model_name='messageattachment',
            index=models.Index(fields=['uploaded_by', 'created_at'], name='messaging_a_uploade_7d3987_idx'),
        ),
        migrations.AddIndex(
            model_name='messageattachment',
            index=models.Index(fields=['virus_scan_status', 'created_at'], name='messaging_a_virus_s_7eba62_idx'),
        ),
        migrations.AddIndex(
            model_name='messageattachment',
            index=models.Index(fields=['patient_context', 'medical_category'], name='messaging_a_patient_fb7f27_idx'),
        ),
        migrations.AddIndex(
            model_name='messageattachment',
            index=models.Index(fields=['security_level', 'is_public'], name='messaging_a_securit_da58dc_idx'),
        ),
        migrations.AddIndex(
            model_name='messageattachment',
            index=models.Index(fields=['expiry_date'], name='messaging_a_expiry__35634f_idx'),
        ),
        migrations.AddIndex(
            model_name='messageauditlog',
            index=models.Index(fields=['action', 'timestamp'], name='messaging_a_action_b0ffe9_idx'),
        ),
        migrations.AddIndex(
            model_name='messageauditlog',
            index=models.Index(fields=['user', 'timestamp'], name='messaging_a_user_id_e46043_idx'),
        ),
        migrations.AddIndex(
            model_name='messageauditlog',
            index=models.Index(fields=['conversation', 'timestamp'], name='messaging_a_convers_0b2635_idx'),
        ),
        migrations.AddIndex(
            model_name='messageauditlog',
            index=models.Index(fields=['patient_context', 'timestamp'], name='messaging_a_patient_6a939a_idx'),
        ),
        migrations.AddIndex(
            model_name='messageauditlog',
            index=models.Index(fields=['hospital_context', 'timestamp'], name='messaging_a_hospita_f814aa_idx'),
        ),
        migrations.AddIndex(
            model_name='messageauditlog',
            index=models.Index(fields=['risk_level', 'is_suspicious'], name='messaging_a_risk_le_6ed3f6_idx'),
        ),
        migrations.AddIndex(
            model_name='messageauditlog',
            index=models.Index(fields=['requires_investigation', 'investigation_status'], name='messaging_a_require_0bc06b_idx'),
        ),
        migrations.AddIndex(
            model_name='messageauditlog',
            index=models.Index(fields=['timestamp', 'action'], name='messaging_a_timesta_8e3224_idx'),
        ),
        migrations.AddIndex(
            model_name='messageparticipant',
            index=models.Index(fields=['conversation', 'is_active'], name='messaging_p_convers_ab81e3_idx'),
        ),
        migrations.AddIndex(
            model_name='messageparticipant',
            index=models.Index(fields=['user', 'is_active'], name='messaging_p_user_id_2a8034_idx'),
        ),
        migrations.AddIndex(
            model_name='messageparticipant',
            index=models.Index(fields=['last_read_at', 'unread_count'], name='messaging_p_last_re_806a34_idx'),
        ),
        migrations.AddIndex(
            model_name='messageparticipant',
            index=models.Index(fields=['is_typing', 'typing_started_at'], name='messaging_p_is_typi_537ed9_idx'),
        ),
        migrations.AddIndex(
            model_name='messageparticipant',
            index=models.Index(fields=['role', 'is_active'], name='messaging_p_role_1fe20b_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='messageparticipant',
            unique_together={('conversation', 'user')},
        ),
    ]
