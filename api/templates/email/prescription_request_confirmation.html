{% extends "email/base_email.html" %}

{% block content %}
<div class="email-container">
    <div class="header">
        <h1>Prescription Request Received üíä</h1>
    </div>

    <div class="content">
        <p>Hello {{ patient_name }},</p>

        <p>We've received your prescription request and it's being reviewed by the medical team at {{ hospital_name }}.</p>

        <div class="request-summary">
            <h3>Request Details</h3>
            <div class="detail-row">
                <span class="label">Reference Number:</span>
                <span class="value">{{ request_reference }}</span>
            </div>
            <div class="detail-row">
                <span class="label">Request Date:</span>
                <span class="value">{{ request_date }}</span>
            </div>
            <div class="detail-row">
                <span class="label">Priority:</span>
                <span class="value">{% if urgency == 'urgent' %}üö® Urgent{% else %}Routine{% endif %}</span>
            </div>
            <div class="detail-row">
                <span class="label">Number of Medications:</span>
                <span class="value">{{ medication_count }}</span>
            </div>
        </div>

        <div class="medications-list">
            <h3>Requested Medications</h3>
            <ul>
                {% for medication in medications %}
                <li>
                    <strong>{{ medication.name }}</strong> {{ medication.strength }}
                    {% if medication.is_repeat %}(Repeat Prescription){% else %}(New Medication){% endif %}
                </li>
                {% endfor %}
            </ul>
        </div>

        {% if urgency == 'urgent' %}
        <div class="urgent-notice">
            <h3>‚ö†Ô∏è Urgent Request</h3>
            <p>Your request has been marked as urgent and will be prioritized for review. Expected processing time: <strong>1-3 business days</strong>.</p>
        </div>
        {% else %}
        <div class="timeline">
            <h3>What Happens Next? üìã</h3>
            <ul>
                <li>A prescriber will review your request within <strong>7-10 business days</strong></li>
                <li>You'll receive an email once your prescription is approved or if more information is needed</li>
                <li>If approved, your prescription will be sent to: <strong>{{ pharmacy_name }}</strong></li>
                <li>You'll be notified when it's ready for collection</li>
            </ul>
        </div>
        {% endif %}

        <div class="pharmacy-info">
            <h3>Collection Pharmacy üè•</h3>
            <p><strong>{{ pharmacy_name }}</strong></p>
            <p>{{ pharmacy_address }}</p>
        </div>

        <div class="important-notes">
            <h3>Important Notes üìù</h3>
            <ul>
                <li>Keep your reference number for tracking: <strong>{{ request_reference }}</strong></li>
                <li>You can check the status of your request in your account dashboard</li>
                <li>If your request is rejected, you'll receive detailed information about next steps</li>
                <li>For urgent medical concerns, please contact your GP immediately or call 111</li>
            </ul>
        </div>

        <div class="footer-note">
            <p>If you did not submit this request or have any questions, please contact us immediately.</p>
            <p>Thank you for using PHB Healthcare! ü©∫</p>
        </div>
    </div>
</div>

<style>
    .email-container {
        max-width: 600px;
        margin: 0 auto;
        font-family: Arial, sans-serif;
    }

    .header {
        background-color: #2196F3;
        color: white;
        padding: 20px;
        text-align: center;
        border-radius: 5px 5px 0 0;
    }

    .header h1 {
        color: white;
        margin: 0;
    }

    .content {
        padding: 20px;
        background-color: #ffffff;
        border-radius: 0 0 5px 5px;
    }

    .request-summary {
        background-color: #e3f2fd;
        padding: 20px;
        border-radius: 5px;
        margin: 20px 0;
        border-left: 4px solid #2196F3;
    }

    .request-summary h3 {
        margin-top: 0;
        color: #1976D2;
    }

    .detail-row {
        margin: 10px 0;
        display: flex;
        justify-content: space-between;
    }

    .label {
        font-weight: bold;
        color: #666;
    }

    .value {
        color: #333;
    }

    .medications-list {
        background-color: #f5f5f5;
        padding: 15px;
        border-radius: 5px;
        margin: 20px 0;
    }

    .medications-list h3 {
        margin-top: 0;
        color: #424242;
    }

    .medications-list ul {
        margin: 10px 0;
        padding-left: 20px;
    }

    .medications-list li {
        margin: 8px 0;
    }

    .urgent-notice {
        background-color: #ffebee;
        padding: 15px;
        border-radius: 5px;
        margin: 20px 0;
        border-left: 4px solid #f44336;
    }

    .urgent-notice h3 {
        margin-top: 0;
        color: #c62828;
    }

    .timeline {
        background-color: #e8f5e9;
        padding: 15px;
        border-radius: 5px;
        margin: 20px 0;
    }

    .timeline h3 {
        margin-top: 0;
        color: #2e7d32;
    }

    .timeline ul {
        margin: 10px 0;
        padding-left: 20px;
    }

    .pharmacy-info {
        background-color: #fff3e0;
        padding: 15px;
        border-radius: 5px;
        margin: 20px 0;
    }

    .pharmacy-info h3 {
        margin-top: 0;
        color: #e65100;
    }

    .important-notes {
        background-color: #fff3cd;
        padding: 15px;
        border-radius: 5px;
        margin: 20px 0;
    }

    .important-notes h3 {
        margin-top: 0;
        color: #856404;
    }

    .important-notes ul {
        margin: 10px 0;
        padding-left: 20px;
    }

    .footer-note {
        border-top: 1px solid #eee;
        margin-top: 20px;
        padding-top: 20px;
        color: #666;
        text-align: center;
    }
</style>
{% endblock %}
